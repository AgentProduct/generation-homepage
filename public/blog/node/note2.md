## 协议栈

[参考文献 1](https://javaguide.cn/cs-basics/network/osi-and-tcp-ip-model.html)
[参考文献 2](https://xxh.xaiu.edu.cn/info/14052/183990.htm)

网络协议栈分 OSI 和 TCP/IP 两种模型。OSI 模型是一种理论模型，而 TCP/IP 模型是一种实际模型。

### OSI 模型（七层模型）

**学习 TCP/IP 协议栈时，有必要先了解 OSI 模型。**
该模型是由 ISO 组织提出的。OSI 模型将网络通信分为七层，从下到上分别是物理层、数据链路层、网络层、传输层、会话层、表示层和应用层。

| 名称                          | 详情                                                                         | 功能                                                                                                       | 设备                       | 协议                                       | 应用                             |
| ----------------------------- | ---------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------- | -------------------------- | ------------------------------------------ | -------------------------------- |
| 应用层（Application Layer）   | 负责应用程序通信，直接为用户应用提供网络服务                                 | 文件传输、邮件、远程访问。提供应用程序之间的通信服务 等。                                                  | 计算机                     | HTTP、FTP、SMTP、DNS、Telnet               | 浏览器、文件传输工具、邮件客户端 |
| 表示层（Presentation Layer）  | 负责数据格式转换                                                             | 数据加密/解密、压缩/解压缩、格式转换。将应用层数据转换为网络可传输的格式，确保数据在不同系统之间的兼容性。 | 计算机                     | JPEG、MPEG、SSL/TLS                        | ——                               |
| 会话层（Session Layer）       | 负责会话管理                                                                 | 建立/维护/终止会话、同步、检查点恢复。管理应用程序之间的会话，确保数据在会话期间的可靠传输。               | 计算机                     | NetBIOS、RPC                               | ——                               |
| 传输层（Transport Layer）     | 实现端到端的逻辑通信，负责数据的可靠传输                                     | 分段/重组、流量控制、错误恢复、端口寻址。提供端到端的通信服务，确保数据在源和目标之间的可靠传输。          | 计算机                     | TCP（传输控制协议）、UDP（用户数据报协议） | ——                               |
| 网络层（Network Layer）       | 实现端到端逻辑寻址，负责数据包的路由和转发，将数据帧路由到目标网络           | 将数据帧从源网络路由到目标网络，使用 IP 地址进行路由。                                                     | 路由器                     | IP、ICMP、ARP                              | ——                               |
| 数据链路层（Data Link Layer） | 在物理层基础上负责将比特流封装成数据帧，提供可靠的数据帧传输                 | 帧定界、错误检测/纠正、流量控制、MAC 地址寻址                                                              | 交换机、网桥               | Ethernet、PPP、HDLC                        | ——                               |
| 物理层（Physical Layer）      | 负责比特流的传输，使用物理介质（如光纤、双绞线、无线电波）提供机械、电气接口 | 激活/维护/关闭物理连接，传输原始比特流                                                                     | 网线、网卡、集线器、中继器 | RJ45、802.3                                | ——                               |

参考图：
![OSI 模型](/blog/node/images/img3.png)

### TCP/IP 模型

了解了 OSI 模型后，再学习 TCP/IP 模型就会更加容易。TCP/IP 模型是一种实际应用的模型，它将 OSI 七层模型合并为四层或者五层来实现网络通信。

**TCP/IP 四层模型**
将 OSI 七层合并为四层。物理层、数据链路层合并为网络接口层，表示层、会话层、应用层合并为应用层，传输层、网络层保持不变。

![TCP/IP 四层模型](/blog/node/images/img6.png)

**TCP/IP 五层模型**
将 OSI 七层合并为五层。表示层、会话层、应用层合并为应用层，传输层、网络层、数据链路层、物理层保持不变。

![TCP/IP 五层模型](/blog/node/images/img7.png)

**为什么明明有了 TCP/IP 协议，还需要 OSI 模型？**

![TCP/IP 与 OSI 模型对比](/blog/node/images/img5.svg)
TCP/IP 早于 OSI 诞生，在当时 OSI 的复杂标准还在委员会中讨论时，TCP/IP 就已经在实际网络中运行并解决了问题。
相比 OSI 模型的七层，TCP/IP 模型的四层更加简单和直接。但两者并非替代关系，而是形成了 “OSI 理论指导，TCP/IP 实践运行” 的共生局面。

### 结合两个模型

这张图展示了 TCP/IP 协议栈是如何在 OSI 的理论框架中分布的。

![协议栈分布图](/blog/node/images/img4.png)
